function InnerArrayFilter(f, receiver, array, length) {
  if (!IS_CALLABLE(f)) throw MakeTypeError(kCalledNonCallable, f);
  var accumulator = new InternalArray();
  var accumulator_length = 0;
  var is_array = IS_ARRAY(array);
  var stepping = DEBUG_IS_STEPPING(f);
  for (var i = 0; i < length; i++) {
    if (HAS_INDEX(array, i, is_array)) {
      var element = array[i];
      // Prepare break slots for debugger step in.
      if (stepping) %DebugPrepareStepInIfStepping(f);
      if (%_Call(f, receiver, element, i, array)) {
        accumulator[accumulator_length++] = element;
      }
    }
  }
  return accumulator;
}
